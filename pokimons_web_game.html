<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pokimons Web Game</title>
<style>
  body { margin:0; font-family:sans-serif; background:#1e293b; color:white; }
  .btn { padding:0.5rem 0.75rem; background:#2563eb; border-radius:0.5rem; border:none; color:white; margin:0.2rem; cursor:pointer; }
  .log, .dialogue { max-height:200px; overflow:auto; background:#334155; padding:0.5rem; border-radius:0.5rem; margin:0.5rem 0; }
  .panel { background:#1e293b; padding:1rem; border-radius:0.5rem; margin:0.5rem; }
</style>
</head>
<body>
<h1>Pokimons Web Game</h1>
<div class="panel">
  <p>Name: <span id="playerName">Player</span></p>
  <button class="btn" onclick="customizePlayer()">Change Name</button>
</div>
<div class="panel">
  <button class="btn" onclick="walkStep()">Walk Step</button>
  <button class="btn" onclick="battleAttack()">Attack</button>
  <button class="btn" onclick="exportSave()">Export Save</button>
</div>
<div class="panel log" id="log"></div>
<div class="panel dialogue" id="dialogue"></div>
<div class="panel">
  <input type="text" id="chatInput" placeholder="Chat with Hoshina..." />
  <button class="btn" onclick="chatRival()">Send</button>
</div>
<script>
  // Simple game state
  let player = { name:'Player', party:[{name:'Emberon', lv:5, hp:45}] };
  let rival = { name:'Hoshina', affinity:0 };
  let encounter = null;

  function log(msg){
    const logDiv = document.getElementById('log');
    logDiv.innerHTML += '<div>'+msg+'</div>';
    logDiv.scrollTop = logDiv.scrollHeight;
  }

  function dialogue(msg){
    const dia = document.getElementById('dialogue');
    dia.innerHTML += '<div>'+msg+'</div>';
    dia.scrollTop = dia.scrollHeight;
  }

  function customizePlayer(){
    const newName = prompt('Enter your name:', player.name);
    if(newName){ player.name = newName; document.getElementById('playerName').innerText = newName; }
  }

  function walkStep(){
    if(Math.random()<0.2){
      encounter = { name:'Wild Emberon', hp:30 };
      log('A wild Emberon appeared!');
    } else {
      log('You walked safely.');
    }
  }

  function battleAttack(){
    if(!encounter){ log('No PokÃ©mon to attack.'); return; }
    let dmg = Math.floor(Math.random()*10)+5;
    encounter.hp -= dmg;
    log('You attacked '+encounter.name+' for '+dmg+' damage.');
    if(encounter.hp <=0){
      log(encounter.name+' fainted!');
      encounter=null;
    } else {
      // Rival may respond
      dialogue('Hoshina: Keep going!');
    }
  }

  function chatRival(){
    const input = document.getElementById('chatInput');
    const text = input.value.trim();
    if(!text) return;
    dialogue(player.name+': '+text);
    if(['good','love','nice'].some(w=>text.toLowerCase().includes(w))){
      rival.affinity +=5;
      dialogue('Hoshina: ...Hmph. That's acceptable.');
    } else {
      rival.affinity -=2;
      dialogue('Hoshina: Hmph.');
    }
    input.value='';
  }

  function exportSave(){
    const data = JSON.stringify(player,null,2);
    const blob = new Blob([data],{type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href=url;
    a.download='pokimons_save.json';
    a.click();
    URL.revokeObjectURL(url);
    log('Game exported.');
  }

  // Load from localStorage
  window.onload = ()=>{
    const saved = localStorage.getItem('pokimonsSave');
    if(saved){ player = JSON.parse(saved); document.getElementById('playerName').innerText = player.name; log('Loaded saved game.'); }
  }

  // Autosave
  setInterval(()=>{ localStorage.setItem('pokimonsSave',JSON.stringify(player)); },8000);
</script>
</body>
</html>
